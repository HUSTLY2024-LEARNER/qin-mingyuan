#第三次培训任务
## 1.实现一个欧拉角转旋转矩阵的程序，并可视化
**思路**
- 输入ZXY顺序旋转的欧拉角，得到旋转矩阵
- 对旋转矩阵利用viz进行变换，实现可视化

_ _ _
**结果**
欧拉角转旋转矩阵如下
![](D:/第三次任务/3.png)
旋转矩阵变换前后的效果如下
![](D:/第三次任务/4.png)
![](D:/第三次任务/5.png)
## 2.实现相机标定，并实现一个图像的去畸变
### 2.1
![](D:/第三次任务/8.png)
相机内参和畸变参数：
```
IntrinsicMatrix=

   1.0e+03 *

   1.667833339721373                   0                   0
                   0   1.661418854993452                   0
   0.628577923163599   0.508151538344712   0.001000000000000


RadialDistortion =

  -0.064981527966785   0.115869839464216
  (NumRadialDistortionCoefficients: 2)


TangentialDistortion =

     0     0
```
**分析**
![](D:/第三次任务/9.png)
拍摄的标定板图片涉及各个方位，并且平均重投影误差在0.2-0.4，是一次较为有效的相机标定
### 2.2
**思路**
参考[https://zhuanlan.zhihu.com/p/534357160](http://)
- 将像素坐标(u,v)转到摄像机坐标系下（通过camera内参）
- 计算畸变量
- 计算畸变位置
- 将该摄像机坐标系下的坐标转到像素坐标系下(最近邻插值)

**效果**
![](D:/第三次任务/6.png)


## 3.实现pnp解算（必做），并利用任务1的程序进行可视化（选做）
### 3.1
实现对1_raw.png或1_whole.png的pnp解算

**思路**
- 利用轮廓提取提取出灯条
- 利用最小外接矩形求出其四个角的2D坐标
- 根据灯条的真实尺寸，知道以其质心为坐标原点的四个角3D坐标系的坐标

- - -

**结果**
提取到的灯条四个角如下
![](D:/第三次任务/1.png)
进行pnp解算后的输出结果如下
![](D:/第三次任务/2.png)
分别表示r,t,旋转矩阵,相机在灯条坐标系下的坐标

- - -

### 3.2
**思路**
将3.1得到的旋转矩阵和平移向量代入1的程序中，得到坐标系的变换图
**结果**
![](D:/第三次任务/7.png)